<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conkers Minigame</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #222;
            position: relative;
        }
        canvas {
            display: block;
        }
    </style>
</head>
<body>
    <script>
        const { Engine, Render, Runner, World, Bodies, Constraint, Mouse, MouseConstraint } = Matter;

        const engine = Engine.create();
        const { world } = engine;

        const render = Render.create({
            element: document.body,
            engine: engine,
            options: {
                width: window.innerWidth,
                height: window.innerHeight,
                wireframes: false,
                background: '#222'
            }
        });
        Render.run(render);
        const runner = Runner.create();
        Runner.run(runner, engine);

        const startX = window.innerWidth / 2;
        const startY = 150;
        const spacing = 150;

        function createConker(x, y) {
            return Bodies.circle(x, y, 40, {
                restitution: 1,
                density: 0.8,
                friction: 0.02,
                render: {
                    sprite: {
                        texture: "conker.png", // Ensure conker.png is in your GitHub repository
                        xScale: 1,
                        yScale: 1
                    }
                }
            });
        }

        // Create two conkers with images
        const ballA = createConker(startX - spacing, startY + 250);
        const ballB = createConker(startX + spacing, startY + 250);

        // Attach the constraints (strings) to the **top of the conker images**
        const stringA = Constraint.create({
            bodyA: ballA,
            pointA: { x: 0, y: -70 }, // Moves the constraint attachment upwards
            pointB: { x: startX - spacing, y: startY },
            stiffness: 1,
            length: 300,
            render: { visible: false } // Hide the extra white lines
        });

        const stringB = Constraint.create({
            bodyA: ballB,
            pointA: { x: 0, y: -70 }, // Moves the constraint attachment upwards
            pointB: { x: startX + spacing, y: startY },
            stiffness: 1,
            length: 300,
            render: { visible: false } // Hide the extra white lines
        });

        World.add(world, [ballA, ballB, stringA, stringB]);

        // Enable dragging of conkers
        const mouse = Mouse.create(render.canvas);
        const mouseConstraint = MouseConstraint.create(engine, {
            mouse: mouse,
            constraint: {
                stiffness: 0.2,
                render: { visible: false }
            }
        });

        World.add(world, mouseConstraint);
        render.mouse = mouse;

        Render.lookAt(render, {
            min: { x: 0, y: 0 },
            max: { x: window.innerWidth, y: window.innerHeight }
        });

    </script>
</body>
</html>
